---
import { getCollection } from 'astro:content';
import Card from '../components/Card.astro';
import Layout from '../layouts/Layout.astro';

const booksCollection = await getCollection('books');
---

<Layout title="Books for Devs">
	<header>
		<h3 class="brand text-gradient2">Books for Devs</h3>
		<ul class="navLinks">
			<li>
				<a href="https://github.com/djsiddz/books-for-devs" target="_blank" title="View Repo">
					<img src=`${import.meta.env.BASE_URL}icons/github.svg` height="24" />
				</a>
			</li>
		</ul>
	</header>
	<main>
		<section class="intro">
			<h1><span class="text-gradient1">Reading the documentation isn't enough!</span><img class="introIllustration" src=`${import.meta.env.BASE_URL}icons/3d-fluency-exploding-head.png` alt="3D Exlopding Head Illustration" title="illustration from icons8.com" /></h1>
			<div class="blueGradientCard">
				<h2>Hi there! üëã</h2>
				<p>This is a curated collection of books that I feel are essential reading for all developers.</p>
				<p>A better developer understands the <strong>How</strong>s & <strong>Why</strong>s, much beyond the documentation.</p>
				<ul>
					<li><strong>Why</strong> do we write our code like this?</li>
					<li><strong>How</strong> does X work?</li>
					<li><strong>Why</strong> do we build things in a certain way?</li>
					<li><strong>How</strong> did we reach here?</li>
				</ul>
				<p>Hope some of these books answer such questions, make you think, and grow you as a developer.</p>
				<p><strong>Stay curious,</strong><br/>Sid :)</p>
			</div>
		</section>
		<section class="collection">
			<h2>The üìò Collection </h2>
			<p>Pick a book in any order.<br/>You'll <span class="text-gradient2">connect the dots</span> eventually.<br/>Kindle editions are available for most of these.</p>
			<p class="smallText">‚ÑπÔ∏è This collection contains affiliate links.<br/>This means I may earn a commission should you make a purchase using my links.<br/>Thank you for supporting me & my work! üòä</p>
			<ul role="list" class="booksGrid">
				{booksCollection.map(book => (
					<Card href={book.data.amazonINLink} title={book.data.title} body={book.data.description} image={book.data.coverImage} />
				))}
			</ul>
		</section>
		<section class="blueGradientCard">
			<div class="splitView">
				<div class="firstPart switchIllustrations">
					<img src="https://illustrations.popsy.co/white/creative-work.svg" alt="Creative Work illustration from popsy.co" title="Let's Collaborate"/>
					<img src="https://illustrations.popsy.co/white/engineer.svg" alt="Engineer illustration from popsy.co" title="Let's Collaborate"/>
					<img src="https://illustrations.popsy.co/white/podcast-show.svg" alt="Podcast illustration from popsy.co" title="Let's Collaborate"/>
					<img src="https://illustrations.popsy.co/white/youtube-creator.svg" alt="Youtube Creator illustration from popsy.co" title="Let's Collaborate"/>
				</div>
				<div class="lastPart">
					<h2>Let's Connect ü§ù</h2>
					<p>Want to add to this growing collection?<br/>Found an interesting book here?<br/>Read one of these previously?</p>
					<p>Reach out to me on any one of these:</p>
					<p><a class="socialIcon" href="https://github.com/djsiddz"><img src=`${import.meta.env.BASE_URL}icons/github.svg`></a><a class="socialIcon" href="https://linkedin.com/in/siddheshthadeshwar"><img src=`${import.meta.env.BASE_URL}icons/linkedin.svg`></a><a class="socialIcon" href="https://threads.net/super__siddy"><img src=`${import.meta.env.BASE_URL}icons/threads.svg` height="16"></a><a class="socialIcon" href="https://twitter.com/super_siddy"><img src=`${import.meta.env.BASE_URL}icons/x.svg`></a></p>
				</div>
			</div>
		</section>
	</main>
	<footer>
		<p class="madeWith">Made with üíñ for Coding &amp; Reading<br/>
			<span class="extraSmallText">"Exploding Head" Illustration by <a href="https://icons8.com/illustrations/author/zD2oqC8lLBBA">Icons 8</a> from <a href="https://icons8.com/illustrations">Ouch!</a><br/>
				"Creative Work", "Engineer", "Podcast Show" & "Youtube Creator" Illustrations from <a href="https://illustrations.popsy.co/">Popsy.co</a>
			</span>
		</p>
		<p class="personalBrand"><a href="https://supersiddy.wordpress.com/"><img class="profilePhoto" src=`${import.meta.env.BASE_URL}profile-photo-siddhesh.jpg` alt="Profile photo" height="16"/>Siddhesh Thadeshwar</a></p>
	</footer>
</Layout>

<style>
	header, footer {
		display: flex;
		justify-content: space-between;
		margin-left: auto;
		margin-right: auto;
		max-width: 90%;
		padding: 0.5rem 1rem;
	}
	.brand {
		color: var(--white);
		font-weight: bold;
		margin: 0;
		display: flex;
		align-self: center;
	}
	.navLinks {
		list-style: none;
		margin: 0;
	}
	.navLinks > li {
		background-color: transparent;
		border-radius: 0.4rem;
	}
	.navLinks > li > a > img {
		padding: 0.5rem 1rem;
	}
	.navLinks > li:hover {
		background: var(--lightbg);
		transition: ease-in-out;
	}
	main {
		margin: auto;
		padding: 1.5rem;
		max-width: 80ch;
	}
	h1 {
		font-size: 3rem;
		font-weight: 800;
		margin: 0;
		margin-bottom: 3em;
	}
	.introIllustration {
		max-height: 3rem;
		vertical-align: middle;
		margin-left: 1.5rem;
	}
	h2 {
		margin-bottom: 1em;
	}
	.smallText {
		font-size: 0.75rem;
	}
	.extraSmallText {
		font-size: 0.5rem;
	}
	@media screen and (max-width: 450px) {
		h1 {
			font-size: 2rem;
		}
		.introIllustration {
			max-height: 2rem;
			margin-left: 1rem;
		}
		.blueGradientCard > ul {
			padding-left: 1rem;
		}
		footer {
			flex-direction: column;
			text-align: center;
		}
		.splitView {
			display: flex;
			flex-direction: column !important;
			justify-content: flex-start;
		}
	}
	.text-gradient1 {
		background-image: var(--new-primary-gradient);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-size: 400%;
		background-position: 0%;
	}
	.text-gradient2 {
		background-image: var(--accent-gradient);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-size: 400%;
		background-position: 0%;
	}
	.blueGradientCard {
		line-height: 1.6;
		margin: 1rem 0;
		border: 1px solid var(--primary);
		background: var(--new-gradient);
		padding: 1rem;
		border-radius: 0.4rem;
		font-size: smaller;
	}
	.blueGradientCard strong {
		color: var(--white);
	}
	.booksGrid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(30ch, 1fr));
		gap: 1rem;
		padding: 0;
		margin-top: 3rem;
	}
	section {
		margin-bottom: 5rem;
		margin-top: 5rem;
	}
	.splitView {
		display: flex;
		flex-direction: row;
		justify-content: space-between;
	}
	.firstPart, .lastPart {
		display: flex;
		flex-direction: column;
		flex: 1;
		align-self: center;
	}
	.switchIllustrations {
		max-width: 100%;
		max-height: 100%;
		position: relative;
	}
	.switchIllustrations img {
		max-width: 100%;
		position: absolute;
		top: -160px;
		left: 0;
		animation-name: imagefade;
		animation-timing-function: ease-in-out;
		animation-iteration-count: infinite;
		animation-duration: 12s;
		opacity: 0;
	}
	@keyframes imagefade {
		0% {
			opacity:1;
		}
		17% {
			opacity:1;
		}
		25% {
			opacity:0;
		}
		92% {
			opacity:0;
		}
		100% {
			opacity:1;
		}
	}
	.switchIllustrations img:nth-of-type(1) {
		animation-delay: 9s;
	}
	.switchIllustrations img:nth-of-type(2) {
		animation-delay: 6s;
	}
	.switchIllustrations img:nth-of-type(3) {
		animation-delay: 3s;
	}
	.switchIllustrations img:nth-of-type(4) {
		animation-delay: 0;
	}

	.lastPart {
		text-align: center;
	}
	.socialIcon:not(:last-child) {
		padding-right: 1.5rem;
	}
	footer {
		color: var(--white);
		font-size: 0.75rem;
	}
	.madeWith {
		line-height: 1.2;
	}
	.personalBrand {
		display: flex;
		align-items: center;
		justify-content: center;
		color: var(--white);
		font-size: large;
	}
	.profilePhoto {
		border-radius: 8px;
		margin-right: 0.5rem;
	}
	footer a, footer a:visited, footer a:focus {
		color: var(--white);
	}
	footer a:hover {
		background-image: var(--accent-gradient);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-size: 400%;
		background-position: 0%;
	}
</style>
