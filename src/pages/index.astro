---
import { getCollection } from "astro:content";
import Card from "../components/Card.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import Intro from "../components/Intro.astro";
import Outro from "../components/Outro.astro";
import Layout from "../layouts/Layout.astro";

const booksCollection = await getCollection("books");
---

<Layout title="Books for Devs">
  <Header />
  <main>
    <section class="intro">
      <h1>
        <span class="text-gradient1"
          >Good engineers read docs.<br />
          Great engineers study decisions, systems, and people.</span
        >
      </h1>
      <p class="hero-subtext">
        A curated reading list shaped by years of building interfaces, systems,
        and teams â€” beyond APIs and frameworks.
      </p>
    </section>
    <section class="collection">
      <h2 class="text-xl font-bold uppercase">The Reading List</h2>
      <p class="text-xs opacity-60 mb-0 font-light">
        Updated in <span class="capitalize">Feb 2026</span>
      </p>
      <!-- <p class="text-xs">
        Kindle editions too are available for most of these.
      </p>
      <p class="text-xs">
        The tag on each book marks my status with these books:<br />
        <span class="font-mono"
          >Read, Currently Reading, Next Up, Wishlisted, and Recommended.</span
        >
      </p> -->
      <ul role="list" class="booksGrid">
        <li class="row-span-2"><Intro /></li>
        {
          booksCollection.map((book) => (
            <Card
              href={book.data.amazonINLink}
              title={book.data.title}
              subtitle={book.data.subtitle}
              body={book.data.description}
              image={book.data.coverImage}
              readingStatus={book.data.readingStatus || ""}
              recommended={book.data.recommended || false}
              insight={book.data.insight}
              intentTags={book.data.intentTags}
              slug={book.slug}
            />
          ))
        }
        <li><Outro /></li>
      </ul>
      <div class="mt-12 mb-8">
        <p
          class="rounded-[0.4rem] border border-gray-500/10 px-4 py-2 text-center text-balance text-xs font-mono"
        >
          The list contains affiliate links. I may earn a commission should you
          make a purchase using my links. Thank you for supporting me & my work!
        </p>
      </div>
    </section>
  </main>
  <Footer />
</Layout>

<style>
  @reference "../styles/global.css";
  main {
    @apply mx-auto max-w-4xl p-6;
  }
  h1 {
    @apply text-4xl max-w-2xl font-bold m-0 mb-6;
  }
  h2 {
    @apply mb-[1em];
  }
  .text-gradient1 {
    background-image: var(--header-gradient);
    @apply bg-clip-text text-transparent bg-size-[400%] bg-position-[0%];
  }
  .booksGrid {
    @apply grid gap-12 grid-cols-[repeat(auto-fit,minmax(25ch,1fr))] p-0 mt-12 min-w-full;
  }
  @media screen and (max-width: 450px) {
    main {
      @apply p-5;
    }
    h1 {
      @apply text-[1.625rem];
    }
  }
  .hero-subtext {
    @apply text-base text-(--accent) max-w-[60ch] mt-6 mb-12 leading-relaxed;
  }
</style>
